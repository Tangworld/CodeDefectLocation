Binary files differ
Binary files differ
@@ -0,0 +1,6 @@
+package test;
+
+public interface Executable {
+
+	        void execute();
+}
@@ -0,0 +1,7 @@
+package test;
+
+public aspect RunnableAspect {
+   public void Executable.run() { execute(); }
+   declare parents: Executable implements Runnable;
+}
+
@@ -0,0 +1,13 @@
+package test;
+
+public class TestClass {
+
+  public static void main(String[] args) {
+                Executable executable = new Executable() {
+                       public void execute() {
+
+                       }
+                };
+  }
+}
+
@@ -32,18 +32,20 @@ public class Ajc163Tests extends org.aspectj.testing.XMLBasedAjcTestCase {
 		runTest("getMethod returning null");
 	}
 
+	public void testItdOnAnonInner_pr171042() {
+		runTest("itd on anonymous inner");
+	}
+
 	public void testMixedStyles_pr213751() {
 		runTest("mixed styles");
 	}
-/*
-	public void testHandles_pr249216c24() {
-		runTest("handles - escaped square brackets");
-		IHierarchy top = AsmManager.lastActiveStructureModel.getHierarchy();
-		IProgramElement itd = findElementAtLine(top.getRoot(), 4);
-		// System.out.println(itd.getHandleIdentifier());
-		assertEquals("<{Handles.java}Handles)Ship.i)\\[\\[String;>;", itd.getHandleIdentifier());
-	}
-*/
+
+	/*
+	 * public void testHandles_pr249216c24() { runTest("handles - escaped square brackets"); IHierarchy top =
+	 * AsmManager.lastActiveStructureModel.getHierarchy(); IProgramElement itd = findElementAtLine(top.getRoot(), 4); //
+	 * System.out.println(itd.getHandleIdentifier()); assertEquals("<{Handles.java}Handles)Ship.i)\\[\\[String;>;",
+	 * itd.getHandleIdentifier()); }
+	 */
 	public void testFQType_pr256937() {
 		runTest("fully qualified return type");
 		IHierarchy top = AsmManager.lastActiveStructureModel.getHierarchy();
@@ -31,6 +31,10 @@
    	  <compile files="Handles.java" options="-emacssym -1.5"/>
     </ajc-test>
 
+    <ajc-test dir="bugs163/pr171042" title="itd on anonymous inner">
+   	  <compile files="TestClass.java Executable.java RunnableAspect.java" options=""/>
+    </ajc-test>
+    
     <ajc-test dir="bugs163/pr254207" title="ordering issue">
       <compile files="Abstract.java Concrete.java" options="-1.5 -proceedOnError -Xset:pipelineCompilation=false">
         <message kind="error" line="1" text="Bound mismatch"/>
